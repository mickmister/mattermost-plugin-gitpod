# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

ports:
  - port: 8065
    onOpen: open-browser

tasks:
  - name: Docker Compose Pull
    init: |
      cd dev && docker-compose pull

  - name: Initial Build
    init: |
      nvm install v13.4.0
      nvm alias default v13.4.0
      make dist    

  - name: Postgres Docker
    command: |
      docker-compose up mattermost

  - name: Mattermost Docker
    command: |
      docker-compose up mattermost
    
  - name: Dev
    init: |
      echo "Installing dependencies! You can check the progress of each in the tabs to the right."
    command: |
      echo "Waiting for Mattermost server to start up"
      gp await-port 8065
      PORT=8065 ./dev/greeting.sh
      
github:
  prebuilds:
    master: true
    pullRequests: true

vscode:
  extensions:
    - golang.go

